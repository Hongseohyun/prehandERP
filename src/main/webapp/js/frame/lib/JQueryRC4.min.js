(function(a){a.fn.rc4=function(c){var d=a.extend({key:null,method:"encrypt",callback:null},c);null==a.fn.rc4.ctrlrInst&&(a.fn.rc4.ctrlrInst=new a.fn.rc4.ctrlr(d));return this.each(function(){a.fn.rc4.ctrlrInst.settings=d;a.fn.rc4.ctrlrInst.container=this;a.fn.rc4.ctrlrInst.initialise(this)})};a.extend({hexEncode:function(a){for(var c=[],b=0;256>b;b++)c[b]="0123456789abcdef".charAt(b>>4)+"0123456789abcdef".charAt(b&15);var f=[];for(b=0;b<a.length;b++)f[b]=c[a.charCodeAt(b)];return f.join("")},hexDecode:function(a){for(var c=
[],b=0;256>b;b++)c["0123456789abcdef".charAt(b>>4)+"0123456789abcdef".charAt(b&15)]=String.fromCharCode(b);if(!a.match(/^[a-f0-9]*$/i))return!1;a.length%2&&(a="0"+a);var f=[],g=0;for(b=0;b<a.length;b+=2)f[g++]=c[a.substr(b,2)];return f.join("")},rc4Encrypt:function(a,d){s=[];for(var b=0;256>b;b++)s[b]=b;var c=0;for(b=0;256>b;b++){c=(c+s[b]+a.charCodeAt(b%a.length))%256;var g=s[b];s[b]=s[c];s[c]=g}c=b=0;a="";for(var e=0;e<d.length;e++)b=(b+1)%256,c=(c+s[b])%256,g=s[b],s[b]=s[c],s[c]=g,a+=String.fromCharCode(d.charCodeAt(e)^
s[(s[b]+s[c])%256]);return a},rc4Decrypt:function(c,d){return a.rc4Encrypt(c,d)},rc4EncryptStr:function(c,d){return a.hexEncode(a.rc4Encrypt(d,unescape(encodeURIComponent(c))))},rc4DecryptStr:function(c,d){return decodeURIComponent(escape(a.rc4Decrypt(d,a.hexDecode(c))))}});a.rc4={};a.fn.rc4.ctrlrInst=null;a.fn.rc4.ctrlr=function(a){this.settings=a};var e=a.fn.rc4.ctrlr;e.prototype.initialise=function(){this.settings.key&&this.settings.method&&("ENCRYPT"==a.trim(this.settings.method.toUpperCase())&&
this.setObjectValue(a.hexEncode(a.rc4Encrypt(this.settings.key,this.getObjectValue()))),"DECRYPT"==a.trim(this.settings.method.toUpperCase())&&this.setObjectValue(a.rc4Decrypt(this.settings.key,a.hexDecode(this.getObjectValue()))))};e.prototype.getObjectValue=function(){if(a.fn.rc4.ctrlrInst.container.innerHTML)return a.fn.rc4.ctrlrInst.container.innerHTML;if(a.fn.rc4.ctrlrInst.container.value)return a.fn.rc4.ctrlrInst.container.value};e.prototype.setObjectValue=function(c){a.fn.rc4.ctrlrInst.container.innerHTML&&
(a.fn.rc4.ctrlrInst.container.innerHTML=c);a.fn.rc4.ctrlrInst.container.value&&(a.fn.rc4.ctrlrInst.container.value=c)}})(jQuery);
